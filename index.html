<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Networking Overview - The Iron Yard</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/solarized.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<style>
			.reveal .block-head {
				display: block;
			}
			.reveal .subheading {
				font-size: 1.5em;
				font-variant: small-caps;
			}
			.reveal .layered-explanation {
				display: flex;
				justify-content: center;
			}
			.reveal .layer-groups {
				flex: 0 0 650px;
				display: flex;
				flex-direction: column;
			}
			.reveal .layer-group {
				display: flex;
				border-bottom: 1px solid #657B83;
			}
			.reveal .layer-group:last-child {
				border-bottom-width: 0;
			}
			.reveal .layered-explanation .layer-group {
				border-bottom: 0;
			}
			.reveal .layer-label {
				font-size: .9em;
				flex: 0 0 250px;
				padding: 8px 16px;
			}
			.reveal .layer-definitions {
				flex: 0 0 680px;
			}
			.reveal .layered-explanation .layer-definitions {
				flex: 0 0 350px;
			}
			.reveal .layer {
				text-align: left;
				box-sizing: border-box;
				margin: 0 0 8px 0;
				padding: 8px 16px;
			}
			.reveal .layered-explanation .layer {
				background-color: #657B83;
				color: #FDF6E3;
				text-align: center;
			}
			.reveal .slides section .layer.fragment.highlight-current-green.visible.current-fragment {
				background-color: #17ff2e;
				color: #657B83;
			}
			.reveal .lowercase {
				text-transform: lowercase;
			}
			.reveal .logo {
				width: 250px;
				height: 250px;
				border: 0;
				box-shadow: none;
			}
			.reveal code.cli {
				text-transform: none;
			}
			.reveal blockquote {
				border: 0;
				box-shadow: none;
				border-left: 4px solid #657B83;
				text-align: left;
				padding-left: 1em;
			}
		</style>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>Network</h1>
					<h2>Wires - Boxes - Magic</h2>
					<p>
						<img src="tiy-logo-500px.png" class="logo">
						<b class="block-head subheading">Gil Pratte</b>
						<div>24 - 25 July 2017</div>
					</p>
					<aside class="notes">
						Your introduction and setting the expectations.
					</aside>
				</section>
				<section>
					<h2>Agenda</h2>
					<div class="layer-group">
						<div class="layer-label">Monday</div>
						<div class="layer-definitions">
							<div class="layer">Inside the network</div>
							<div class="layer"><code>http://</code>World Wide Web</div>
							<div class="layer">Database communication</div>
						</div>
					</div>
					<div class="layer-group">
						<div class="layer-label">Tuesday</div>
						<div class="layer-definitions">
							<div class="layer"><code>https://</code>Secure World Wide Web</div>
							<div class="layer">Network Errors and Tools</div>
							<div class="layer">HCA Network Layout and Services</div>
						</div>
					</div>
				</section>
				<section>
					<h2>Inside the Network</h2>
				</section>
				<section>
					<section>
						<h2>OSI Model Presentation</h2>
					</section>
					<section>
						<h3>Overview</h3>
						<p>It is a <em>conceptual</em> model, not a real one (like IPS)</p>
						<p class="fragment">Consider this an <em>ideal</em> network organization</p>
						<p class=fragment>Like many ISO standards, much of it is formal theory</p>
						<p class="fragment">The concepts are a key element in most modern network system design</p>
					</section>
					<section>
						<h3>Post office analogy</h3>
						<p>Hopefully most of you are old enough to have mailed a box or two at the post office.</p>
						<p>So let's pretend, that you are going to upload a recently recorded screencast to YouTube that you have made.</p>
					</section>
					<section>
						<h3>Layer 8 - You!</h3>
						<p>You've made your movie, encoded it to Ogg, and are ready to send it to YouTube. You click the button and...</p>
						<aside class="notes">
							<p>Ok, so there's no real "Layer 8", not in the original spec, anyway. Infosec defind "the user" as Layer 8, so you're stuck with it. </p>
						</aside>
					</section>
					<section>
						<h3>Layer 7 - Application Layer</h3>
						<p>Its purpose is to exchange data between programs running on the source and destination hosts.</p>

						<p>This layer will identify communication partners and determining resource availability.</p>
					</section>
					<section>
						<h3>Layer 7 - Post office analogy</h3>
						<p>The movie that you've encoded has been printed out into 29,923,182 still images by the local print shop. </p>
						<p>You've dumped them at the Application Counter at Post Office with where you want it to go, threw some cash on the counter, and walked out.</p>
					</section>
					<section>
						<h3>Layer 6 - Presentation Layer</h3>
						<p>It handles the transformation of the data coming at it from the Application Layer into a common structure that the lower layers will use</p>
						<aside class="notes">
							<ul>
								<li>convert from UCS2 for UTF16</li>
								<li>little-endian to big-endian</li>
								<li>compression</li>
								<li>TLS encryption</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Layer 6 - Post office analogy</h3>
						<p>A worker at the Application Counter hands the sheets to Sid, the worker at the Presentation Station.</p>
						<p class="fragment">Sid takes a look at all these sheets of letter-sized paper. This particular Post Office really likes using A4, so the person changes the size of all the sheets of paper. (i.e., data transformation)</p>
					</section>
					<section>
						<h3>Layer 6 - Post office analogy continued</h3>
						<p>Sid then realizes that there are images that are identical because nothing changed between the movie frames. He discards the extra ones and writes a little note about the duplicates. (i.e. compression)</p>
						<p class="fragment">Sid then decide to fold all of the pieces in thirds because that's the standard way to fold a piece of paper for the Post Office. (i.e. encryption)</p>
					</section>
					<section>
						<h3>Layer 5 - Session Layer</h3>
						<p>The Session Layer allows devices to establish, manage, and cleanly end sessions which are just a logical persistent link between two processes.</p>
						<p>This layer allows those two processes to exchange data over a period of time like minutes, hours, days.</p>
					</section>
					<section>
						<h3>Layer 5 - Post office analogy</h3>
						<p>Sally, the Session Station worker, has received the movie from the Presentation Station.</p>
						<p class="fragment">Sally writes the destination on a little ticket, puts it in an order carousel, and yells, "DATA UP!" which alerts everyone in the back room that another round of data is ready to be sent and that Sally should be alerted if something fails between this post office and the receiving post office. (i.e. creates a session)</p>
					</section>
					<section>
						<h3>Layer 4 - Transport Layer</h3>
						<p>It determines how to split up the data into smaller units (fragment), and apply headers to it for tracking, order, and addressing. When receiving reassembles back into data.</p>
						<p class="fragment">Takes on the responsibility of ensuring reliable transmission.</p>
						<aside class="notes">
							Regarding reliable transmision
							<ul>
								<li>controlling the amount of traffic</li>
								<li>acknowledging the receipt of messages</li>
								<li>which application sent data (or which is to receive data)</li>
								<li>deals with error in messages and missing messages</li>
								<li>connection handling (reinitiate, retransmit)</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Layer 4 - Post office analogy</h3>
						<p>The movie has reached Tanya at the Transport Room. She knows that the 23,493,785 pieces of paper is too large a package to send.</p>
						<p class="fragment">She "fragment"s the whole bunch into 24 bundles, the first 23 containing 1,000,000 sheets and the last containing the remainder. (i.e. fragmenting)</p>
					</section>
					<section>
						<h3>Layer 4 - Post office analogy continued</h3>
						<p>Tanya puts each bundle into a box and affixes a label that has a serial number, the order that the bundle fits into the overall group of boxes, and the name of the recipient. (i.e. addressing, ordering)</p>
						<p class="fragment">In the journal she jots down the serial number and "Google Chrome 0x383A983B" which is the application from which the data originated. (i.e. tracking)</p>
					</section>
					<section>
						<h3>Layer 4 - Post office analogy continued</h3>
						<p>She takes all of that, makes a copy of each box, and sends them on to the next station. (i.e. in case of errors)</p>
						<p class="fragment">Once she gets acknowledgement that all of the boxes arrived in good condition she will get rid of the copies.</p>
					</section>
					<section>
						<h3>Layer 3 - Network Layer</h3>
						<p>When sending network layer will</p>
						<ul>
							<li>get a segment from the Transport Layer and break it up into even smaller packets if necessary</li>
							<li>translate the network address to a physical address</li>
							<li>figure out which network interface to send it on</li>
						</ul>
					</section>
					<section>
						<h3>Layer 3 - Network Layer</h3>
						<p>When receiving network layer</p>
						<ul>
							<li>will reassembling the packets into the segments</li>
							<li>can tell the sender to slow down</li>
						</ul>
					</section>
					<section>
						<h3>Layer 3 - Post office analogy</h3>
						<p>The boxes come to Shelly in the Network Bay. She must determine how to send them to the next destination.</p>
						<p class="fragment">If there is a single road between this post office and the final destination, then she will put the boxes on the loading dock for the truck bound for that final stop. However, if there's not a single road between them, she will figure out the best route and put the boxes on the loading dock for the truck heading to the first leg of the route. (i.e. which interface)</p>
					</section>
					<section>
						<h3>Layer 2 - Data Link Layer</h3>
						<ul>
							<li>The Data Link Layer provides the node-to-node transfer (e.g. from/to MAC addresses)</li>
							<li>Can break up the Network Layer packets into frames</li>
							<li>Can make sure the frames have not been corrupted</li>
							<li>Can drop duplicate frames</li>
						</ul>
					</section>
					<section>
						<h3>Layer 2 - Post office analogy</h3>
						<p>Rocky works for the Data Link union and he moves boxes on and off trucks.</p>
						<p class="fragment">Sometimes Rocky unpacks boxes and puts the contents into a number of smaller boxes with enough information that they can be reassembled into one box. (i.e. packets into frames)</p>
					</section>
					<section>
						<h3>Layer 2 - Post office analogy continued</h3>
						<p>Rocky lets his foreman know if any boxes are in bad shape. (i.e. checks for corruption)</p>
						<p class="fragment">Rocky also participates in keeping a list of boxes that are unloaded in case a another one with the exact same label arrives. In this case the duplicate is thrown away. (i.e. drop duplicates)</p>
					</section>
					<section>
						<h3>Layer 1 - Physical Layer</h3>
						<p>Ethernet, 802.11, twisted pair, ...</p>
					</section>
					<section>
						<h3>Layer 1 - Post office analogy</h3>
						<p>The truck and the road</p>
					</section>
				</section>
				<section>
					<section>
						<h2>IPS Model Presentation</h2>
					</section>
					<section>
						<h3>Different than OSI</h3>
						<table>
							<thead>
								<tr>
									<th>OSI</th><th>IPS</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>Model then architecture</td>
									<td>Architecture then model</td>
								</tr>
								<tr>
									<td>Conceptual</td><td>Concrete</td>
								</tr>
								<tr>
									<td>Strict boundaries</td>
									<td>Loose boundaries</td>
								</tr>
								<tr>
									<td>7 layers</td>
									<td>4 layers</td>
								</tr>
							</tbody>
						</table>
					</section>
					<section>
						<h3>Thank you AT&T</h3>
						<p>June 1989 open sourced TCP/IP for unix</p>
						<p class="fragment">IBM and others picked it up</p>
						<p class="fragment">Windows 95 joined the party</p>
					</section>
					<section>
						<h3>Layers</h3>
						<p>Application Layer</p>
						<p>Tranport Layer</p>
						<p>Internet Layer</p>
						<p>Link Layer</p>
				  </section>
					<section>
						<img height="600px"src="images/IP_stack_connections.svg">
					</section>
					<section>
						<h3>Application Layer</h3>
						<p>The purpose of the Application Layer is to provide software applications with services of the Internet like file/data retrieval, send and receive email, publish messages, and use cryptocurrencies.</p>

					</section>
					<section>
						<p>Design of the protocols of the Applciation Layer tend to follow <a href="https://en.wikipedia.org/wiki/Jon_Postel">Jon Postel</a>'s law:</p>

						<blockquote cite="https://en.wikipedia.org/wiki/Jon_Postel#Postel.27s_law">[build application protocols with] a general principle of robustness: be conservative in what you do, be liberal in what you accept from others.</blockquote>

					</section>
					<section>
						<p>Basically, any protocol that uses TCP or UDP lives in the Application Layer.</p>
					</section>
					<section>
						<p>Examples of Application Layer Protocols</p>
						<ul>
							<li>HTTP</li>
							<li>FTP</li>
							<li>SMTP</li>
							<li>DHCP</li>
							<li>DNS</li>
							<li>SSH</li>
						</ul>
					</section>
					<section>
						<h3>Transport Layer</h3>
						<p>Delivers data from one application to another irrespective of what data that the application sends and what the underlying network looks like. This layer is the one that defines and allows binding to ports.</p>
						<aside class="notes">
							<p>Tranport can be connection-oriented or connection-less</p>
						</aside>
					</section>
					<section>
						<h4>TCP (connection-oriented)</h4>
						<blockquote cite="http://">
							[provides] one-to-one, connection-oriented, reliable communication service responsible for the establishment of a connection, the sequencing and acknowledgement of packets sent, and the recovery of packets lost during transmission.
						</blockquote>
					</section>
					<section>
						It is characterized as a
						<blockquote cite="http://">
							reliable stream delivery service which guarantees that all bytes received will be identical with bytes sent and in the correct order.
						</blockquote>
					</section>
					<section>
						<p>To establish the connection TCP creates two-way transmission connections with a three-step handshake:</p>
						<p class="fragment">client send SYN flag with random number</p>
						<p class="fragment">server replies with SYN-ACK flag with client's number + 1 and a new random number</p>
						<p class="fragment">client sends ACK flag and server's number + 1</p>
					</section>
					<section>
						<h4>UDP (connection-less) "fire and forget"</h4>
						<ul>
							<li>Does not guarantee delivery</li>
							<li>Does not guarantee ordering</li>
							<li>Does not guarantee removal of duplicates</li>
							<li>Does not guarantee error correction</li>
						</ul>
					</section>
					<section>
						<h4>Internet Layer</h4>
						<p>This is IP. It does two things: addressing (IP addresses) and routing. That's it. Figure out where a packet needs to go.</p>
						<aside class="notes">
							<p>Sometimes that's from the actual client to a server. Or from router to router to router ...</p>
						</aside>
					</section>
					<section>
						<h4>ICMP</h4>
						<ul>
							<li>used for error messages</li>
							<li>used for operational information</li>
							<li>not used for data</li>
							<li>contained in IP packets but handled differently</li>
							<aside class="notes">
								<ul>
									<li>timeout messages</li>
									<li>traceroute uses icmp</li>
								</ul>
							</aside>
						</ul>
					</section>
					<section>
						<h3>Link Layer</h3>
						<p>Physical hardware moving packets (from to MAC adresses)</p>
						<aside class="notes">
							Something about VPN point to BT.
						</aside>
					</section>
					<section>
						<img height="600px"src="images/UDP_encapsulation.svg">
					</section>
				</section>
				<section>
					<section>
						<h2>Kinds of Networks</h2>
					</section>
					<section>
						<h3>LAN</h3>
						<img src="images/lan.svg">
						<aside class="notes">
							Computers inside LAN mostly get IP using DHCP.
						</aside>
					</section>
					<section>
						<h3>WAN</h3>
						<img src="images/wan.svg">
						<aside class="notes">
							Think of the routers as an ISP
						</aside>
					</section>
				</section>
				<section>
					<section>
						<h2>Network Devices</h2>
					</section>
					<section>
						<h3>Switches (OSI Layer 2 Devices)</h3>
						<img src="images/switch.svg">
						<aside class="notes">
							<ul>
								<li>switches only know mac addresses</li>
								<li>packets and p2p or multicast</li>
								<li>p2p goes to one nic</li>
								<li>multicast goes to all nics</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Routers (OSI Layer 3 Devices)</h3>
						<img src="images/router.svg">
						<aside class="notes">
							<ul>
								<li>192.168 my house</li>
								<li>118 ip of my modem AT&T ISP</li>
								<li>middle is WAN router (trans atlantic cable)</li>
								<li>30 ip of amazon uk</li>
								<li>10.199 amazon's server</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Firewall</h3>
						<img src="images/firewall.svg">
						<aside class="notes">
							<ul>
								<li>10.199 my computer at work can serf web and ping</li>
								<li>firewall allows ssh (rules no password but cert)</li>
							</ul>
						</aside>
					</section>
				</section>
				<section>
					<section>
						<h2>Cloud Computing</h2>
					</section>
					<section>
						<img height="600px"src="images/Cloud_computing.svg">
					</section>
					<section>
						<blockquote cite="https://en.wikipedia.org/wiki/Cloud_computing">
							"Cloud computing is a form of Internet-based computing that provides shared computer processing resources and data to computers and other devices on demand."
						</blockquote>
					</section>
					<section>
						<h3>AWS Elastic Beanstalk</h3>
						<blockquote cite="https://aws.amazon.com/elasticbeanstalk/">
							"You can simply upload your code and Elastic Beanstalk automatically handles the deployment, from capacity provisioning, load balancing, auto-scaling to application health monitoring."
						</blockquote>
					</section>
					<section>
						<h3>Cloud Security</h3>
						<h5>The service provider can</h3>
						<p>Access all data</p>
						<p class="fragment">Share information if necessary (e.g. legal)</p>
						<p class="fragment">Whatever else is in the privacy policy (that you didn't read)</p>
					</section>
					<section>
						<h3>More Cloud Security</h3>
						<blockquote cite="https://en.wikipedia.org/wiki/Cloud_computing#Security_and_privacy">
							"In a cloud provider platform being shared by different users there may be a possibility that information belonging to different customers resides on same data server. Therefore, Information leakage may arise by mistake when information for one customer is given to other."
						</blockquote>
					</section>
					<section>
						<h3>Even More Cloud Security</h3>
						<blockquote cite="https://en.wikipedia.org/wiki/Cloud_computing#Security_and_privacy">
							"Additionally, Eugene Schultz, chief technology officer at Emagined Security, said that hackers are spending substantial time and effort looking for ways to penetrate the cloud. "There are some real Achilles' heels in the cloud infrastructure that are making big holes for the bad guys to get into". "
						</blockquote>
					</section>
					<section>
						<h3>Limitations and disadvantages</h3>
						<p>Security</p>
						<p class="fragment">Limited options</p>
						<p class="fragment">Bandwidth</p>
						<p class="fragment">Cost</p>
					</section>
				</section>
				<section>
					<section>
						<h2>HTTP</h2>
						<h4>the language of the Web</h4>
					</section>
					<section>
						<h3>HTTP specification</h3>
						<p>HTTP functions as a request–response protocol in the client–server computing model.</p>
						<aside class="notes">
							<ul>
								<li>HTTP uses TCP/IP as a transport layer</li>
								<li>The client submits an HTTP request message to a server</li>
								<li>The server returns with a response message (html page, images, json, ...) to the client</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>HTTP versions</h3>
						<ul>
							<li>HTTP V0.9 (1991)</li>
							<li>HTTP/1.0 (1996) - connection for every request</li>
							<li>HTTP/1.1 (1997) - connection reuse</li>
							<li>HTTP/2 (2014)- server push</li>
						</ul>
						<aside class="notes">
							<ul>
								<li>The dates are when the standards were released. Browser in the 1990 were more like the wild wild west</li>
								<li>According to one source (W3Techs), as of May 2017, 13.7% of the top 10 million websites supported HTTP/2</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>HTTP Session</h3>
						<p>HTTP is a stateless protocol.</p>
						<aside class="notes">
							<ul>
								<li>client info hidden input or parameter or cookie</li>
								<li>Show devtools and hit texastoc.com see cookie in request</li>
								<li>show cookie in chrome settings </li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>HTTP Request</h3>
						<ul>
							<li>A request line (e.g., GET www.ibm.com HTTP/1.1)</li>
							<li>Request header fields (e.g., Accept-Language: en)</li>
							<li>An empty line</li>
							<li>An optional message body</li>
						</ul>
						<br>
						<br>
						<a href="https://curl.haxx.se/">https://curl.haxx.se/</a>
						<aside class="notes">
							<ul>
								<li>curl -v https://gturnquist-quoters.cfapps.io/api/random</li>
								<li>curl https://gturnquist-quoters.cfapps.io/api/random | python -m json.tool</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>HTTP Request Methods</h3>
						<p>HTTP/1.0 defined GET, POST and HEAD methods.</p>
						<p class="fragment">HTTP/1.1 added: OPTIONS, PUT, DELETE, TRACE and CONNECT.</p>
					</section>
					<section>
						<h3>HTTP Request Methods continued</h3>
						<ul>
							<li>GET - retrieve data</li>
							<li>HEAD - identical to GET but no body</li>
							<li>POST - submit data (e.g. login, add user, ...)</li>
							<li>PUT - update data</li>
							<li>DELETE - delete data</li>
							<li>TRACE - loop back (i.e. echo)</li>
							<li>OPTIONS - methods the server supports</li>
							<li>CONNECT converts to a TCP/IP tunnel</li>
							<li>PATCH - update a portion of data</li>
						</ul>
						<aside class="notes">
							<ul>
								<li>HEAD - This is useful for retrieving meta-information written in response headers</li>
								<li>OPTIONS - CORS check (employed by Angular)</li>
								<li>CONNECT - VPN instead</li>
								<li>PATCH - never coded</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>REST (Representational state transfer)</h3>
						<p>Is not a standard but a set of constraints, such as being stateless, having a client/server relationship, and a uniform interface.</p>
					</section>
					<section>
						<h3>REST</h3>
						<p>Normally done using using HTTP.</p>
						<p class="fragment">Employs a verb/noun dialect (e.g. GET /users, GET /users/44, ...).</p>
						<p class="fragment">JSON data to represent data objects and attributes.</p>
						<p class="fragment">Stateless interactions store no client context on the server between requests.</p>
						<p class="fragment"><a href="https://www.eventbrite.com/developer/v3/">Eventbrite APIs</a></p>
						<aside class="notes">
							<ul>
								<li>The noun/verb dialet goes a long way for self documenting APIs</li>
								<li>JSON is becoming the defactor representation for data. It is much smaller than XML. Smaller is better. Is used natively if a node.js server. Java marshalls and unmarshalls JSON to Java objects.</li>
								<li>Stateless - server does not have a session for the client. There are other ways to keep session data (see next section)</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>REST</h3>
						<table>
							<thead>
								<tr>
									<th>PROS</th>
									<th>CONS</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>Finally can decouple the server from the client</td>
									<td>Must have enough state on client or server (e.g. a wizard)</td>
								</tr>
								<tr>
									<td>One API for multiple clients (web, iOS, Android, ...)</td>
									<td></td>
								</tr>
								<tr>
									<td>Atomic call</td>
									<td></td>
								</tr>
							</tbody>
						</table>
						<aside class="notes">
							Session state can be kept on client if not web. For web session state must be kept in a cookie or on server or ... .
						</aside>
					</section>
					<section>
						<h3>Request Headers</h3>
						<p>
							<a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Request_fields">List of HTTP header fields</a>
						</p>
						<p>
							<a href="http://www.example.com">example.com</a>
						</p>
						<aside class="notes">
							<ul>
								<li>Accept (mime type)</li>
								<li>Accept-Encoding	(zip)</li>
								<li>Authorization (will show this later)</li>
								<li>Cache-Control (no-cache means get it from the server, no-store means do not store the response)</li>
								<li>Connection (request the connection stay open)</li>
								<li>Cookie (will show this later)</li>
								<li>Content-Type (post and put - e.g. multipart/form-data)</li>
								<li>Host</li>
								<li>Origin</li>
								<li>Referer (funny that is was misspelled)</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>HTTP Response</h3>
							<ul>
								<li>A status line with the status code and reason message (e.g., HTTP/1.1 200 OK)</li>
								<li>Response header fields (e.g., Content-Type: text/html)</li>
								<li>An empty line</li>
								<li>An optional message body</li>
							</ul>
							<p>
								<a href="http://www.example.com">example.com</a>
							</p>
							<aside class="notes">
								Look closer at the response in dev tools
							</aside>
					</section>
					<section>
						<h3>HTTP Response Status Codes</h3>
						<a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">https://en.wikipedia.org/wiki/List_of_HTTP_status_codes</a>
						<aside class="notes">
							<p>
								404 <br>
								<code>
									curl -v http://texastoc.com/sdfsdf
								</code>
							</p>
							<p>
								401 <br>
								<code>
									curl -v https://www.eventbriteapi.com/v3/users/me/?token=bogus
								</code>
							</p>
						</aside>
					</section>
					<section>
						<h3>HTTP Response Headers</h3>
						<a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Response_fields">List of HTTP header fields</a>
						<aside class="notes">
							<ul>
								<li>Access-Control-Allow-Origin (which sites allowed)</li>
								<li>Connection (if closed means that the web server will close the TCP connection immediately after the transfer of this response)</li>
								<li>Content-Encoding (gzip)</li>
								<li>Set-Cookie (sets the cookie)</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Compression</h3>
						<blockquote cite="https://en.wikipedia.org/wiki/HTTP_compression">
							A 2009 article by Google engineers Arvind Jain and Jason Glasgow states that more than 99 person-years are wasted daily due to increase in page load time when users do not receive compressed content.
						</blockquote>
						<aside class="notes">
							example.com in dev tools
						</aside>
					</section>
					<section>
						<h3>HTTP Authentication </h3>
						<ul>
							<li>Basic Auth</li>
							<li>Token Based (e.g. OAuth2)</li>
							<li>Custom</li>
						</ul>
					</section>
					<section>
						<h3>Basic Auth</h3>
						<p>Server challenges for username/password before showing web page.</p>
						<p>There is no client/server session.</p>
						<p><a href="https://auth-demo.aerobatic.io/">HTTP Basic Auth Demo</a></p>
					</section>
					<section>
						<h3>Token based</h3>
						<p><b>Authorization: Basic</b> <br>
							<code>curl -v --user aerobatic:aerobatic https://auth-demo.aerobatic.io/protected-standard/</code></p>
							<p><b>Authorization: Bearer</b> <br>
								<code>curl -H "Authorization: Bearer QFMYBY4KGDFYNWRPDLRJ" https://www.eventbriteapi.com/v3/users/me/</code></p>
						<aside class="notes">
							<p>For basic curl auth header is a hash</p>
							<p>Mention signing up on eventbrite to get the token - same as googgle tools</p>
						</aside>
					</section>
					<section>
						<h3>JSON Web Token (JWT)</h3>
						<blockquote cite="https://jwt.io/introduction/">
							JSON Web Token (JWT) is an open standard (RFC 7519) that defines a compact and self-contained way for securely transmitting information between parties as a JSON object. This information can be verified and trusted because it is digitally signed. JWTs can be signed using a secret (with the HMAC algorithm) or a public/private key pair using RSA.
						</blockquote>
						<aside class="notes">
							JWT is a big deal because it is more than a just a key to unlock the door. It also has a payload with information about the user.
						</aside>
					</section>
					<section>
						<h3>Caching</h3>
						<p>Browsers cache html, javascript, css and more.</p>
						<p class="fragment">Proxies can be configured to cache</p>
						<p class="fragment">HTTP Web server (e.g. Apache/Nginx)</p>
						<p class="fragment">Application Server (e.g. Ehcache in Spring)</p>
						<p class="fragment">Databases</p>
						<aside class="notes">
							<ul>
								<li>CDNs are good for browser caching</li>
								<li>Stats for nike. Instead of ETL to denormalized DB made a lot of calls to DB but kept everything in memory cache</li>
								<li>More info if needed<br>
									<a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching">HTTP Caching</a>
</li>
							</ul>
						</aside>
					</section>
					<section>
						<p>What happens when we type <code>http://www.example.com/</code> in a browser</p>
					</section>
					<section>
						<div class="layered-explanation">
							<div class="layer-groups">
								<div class="layer-group">
									<div class="layer-definitions">
										<div class="layer fragment highlight-current-green">Check browser cache</div>
										<div class="layer fragment highlight-current-green">Resolve DNS</div>
										<div class="layer fragment highlight-current-green">Assemble HTTP request</div>
										<div class="layer fragment highlight-current-green">TCP/IP connection</div>
										<div class="layer fragment highlight-current-green">SSL encryption</div>
										<div class="layer fragment highlight-current-green">IP packets</div>
									</div>
								</div>
							</div>
							<div class="layer-explanation">
								<i>steps to send an HTTP request</i>
							</div>
						</div>
						<aside class="notes">
							<ul>
								<li>Browser checks it cache</li>
								<li>DNS next section</li>
								<li>Assemble request (browser)</li>
								<li>TCP/IP already covered</li>
								<li>SSL tomorrow</li>
								<li>IP already covered</li>
							</ul>
						</aside>
					</section>
					<section>
						<a href="http://royal.pingdom.com/2009/06/08/a-visual-explanation-of-how-dns-lookups-work/">DNS lookups</a>
						<aside class="notes">
							<ul>
								<li>DNS syncs up domain names with IP addresses enabling humans to use memorable domain names while computers on the Internet can use IP addresses</li>
								<li>There are about 300 to 400 million domain names.</li>
							</ul>
							<ul>
								<li>Query the recursive name server (provided by ISP or wireless provider). The name server will check its cache for the entry and check its TTL. If it doesn't have it or it is expired then...</li>
								<li>Query the Internet root servers to get the address of th name servers for the .com top level domain (TLD)</li>
								<li>Query the .com TLD name servers to get the address of the authoritative name servers for abc.com</li>
								<li>Query the authoritative name servers for abc.com to finally get the IP address</li>
							</ul>
							View DNS server on mac
							<ul>
								<li>Choose Apple menu > System Preferences, then click Network</li>
								<li>Select the network connection service you want to use (such as Wi-Fi or Ethernet, unless you named it something else) in the list, then click Advanced</li>
								<li>Click DNS</li>
							</ul>
						</aside>
					</section>
				</section>
				<section>
					<h2>Database</h2>
				</section>
				<section>
					<h2>Review</h2>
					<ul>
						<li>
							<b>Network fundamentals</b>: OSI, LANs, WANs, routers, switches
						</li>
						<li>
							<b>HTTP</b>: request, response, and everything in-between
						</li>
						<li>
							<b>Database</b>: request and getting data from a database
						</li>
					</ul>
				</section>
				<section>
					<section>
						<h1>Security!</h1>
					</section>
					<section>
						<blockquote cite="http://docs.spring.io/spring-security/site/docs/4.2.4.BUILD-SNAPSHOT/reference/htmlsingle/">
							Security is an ever-moving target, and it’s important to pursue
							a comprehensive, system-wide approach. In security circles we
							encourage you to adopt "layers of security", so that each layer
							tries to be as secure as possible in its own right, with
							successive layers providing additional security. The "tighter"
							the security of each layer, the more robust and safe your
							application will be.
						</blockquote>
					</section>
					<section>
						<blockquote cite="http://docs.spring.io/spring-security/site/docs/4.2.4.BUILD-SNAPSHOT/reference/htmlsingle/">
							At the bottom level you’ll need to deal
							with issues such as transport security and system
							identification, in order to mitigate man-in-the-middle attacks.
						</blockquote>
					</section>
					<section>
						<blockquote cite="http://docs.spring.io/spring-security/site/docs/4.2.4.BUILD-SNAPSHOT/reference/htmlsingle/">
							Next you’ll generally utilise firewalls, perhaps with VPNs or IP
							security to ensure only authorised systems can attempt to
							connect.
						</blockquote>
					</section>
					<section>
						<blockquote cite="http://docs.spring.io/spring-security/site/docs/4.2.4.BUILD-SNAPSHOT/reference/htmlsingle/">
							In corporate environments you may deploy a DMZ to separate
							public-facing servers from backend database and application
							servers.
						</blockquote>
					</section>
					<section>
						<blockquote cite="http://docs.spring.io/spring-security/site/docs/4.2.4.BUILD-SNAPSHOT/reference/htmlsingle/">
							Your operating system will also play a critical part, addressing
							issues such as running processes as non-privileged users and
							maximising file system security. An operating system will
							usually also be configured with its own firewall.
						</blockquote>
					</section>
					<section>
						<blockquote cite="http://docs.spring.io/spring-security/site/docs/4.2.4.BUILD-SNAPSHOT/reference/htmlsingle/">
							Hopefully somewhere along the way you’ll be trying to
							prevent denial of service and brute force attacks against the
							system. An intrusion detection system will also be especially
							useful for monitoring and responding to attacks, with such
							systems able to take protective action such as blocking
							offending TCP/IP addresses in real-time.
						</blockquote>
					</section>
				</section>
				<section>
					<section>
						<h1>Transport Layer Security</h1>
						<h2>(aka Secure Socket Layer)</h2>
					</section>
					<section>
						<h2>Establishing the Secure Connection</h2>
						<img src="images/https-1.svg">
					</section>
					<section>
						<h2>Establishing the Secure Connection</h2>
						<img src="images/https-2.svg">
					</section>
					<section>
						<h2>Establishing the Secure Connection</h2>
						<img src="images/https-3.svg">
					</section>
					<section>
						<h2>Establishing the Secure Connection</h2>
						<img src="images/https-4.svg">
					</section>
					<section>
						<h2>Establishing the Secure Connection</h2>
						<img src="images/https-5.svg">
					</section>
					<section>
						<h2>Establishing the Secure Connection</h2>
						<img src="images/https-6.svg">
					</section>
					<section>
						<h2>DIY Certs</h2>
						<h3>You can generate your own certificates, too!</h3>
						<aside class="notes">
							<p>Run this in ./src/main/resources of the Spring app.</p>
							<pre><code>keytool -genkeypair -alias tiynetapp -storetype PKCS12 -keyalg RSA -keysize 2048 -keystore tiynetapp.p12 -validity 3650 -dname "CN=Gil Pratte, OU=Academy, O=The Iron Yard, L=Austin, ST=Texas, C=US" -keypass tiynetapp -storepass tiynetapp</code></pre>
							<p>In <b>application.yml</b>, uncomment the SSL stuff and change the port from 80 to 443</p>
							<p>Run the Spring app with <code>sudo mvn spring-boot:run</code></p>
						</aside>
					</section>
				</section>
				<section>
					<h1> OWASP! Sql injecting, XSS, CSRF (OWASP)
CORS, JWT, OAuth </h1>
				</section>
				<section>
					<section>
						<h1>Network Tools</h1>
					</section>
					<section>
						<h2><code class="cli">nslookup</code></h2>
						<p>Translate a name to an IP address</p>
						<aside class="notes">
							<p>By default, returns the A/AAAA record</p>
							<p><code>nslookup google.com</code></p>
							<p>Can also return all the DNS records</p>
							<p><code>nslookup -type=any google.com</code></p>
							<p>Can also return and name dns server</p>
							<p><code>nslookup google.com - ns1.google.com</code></p>
<pre><code>Server:     209.18.47.61      // 1. dns server - not the authoritative
Address:    209.18.47.61#53   // 2. with port

Non-authoritative answer:    // see 1.
Name:   google.com
Address: 172.217.6.142

google.com  has AAAA address 2607:f8b0:4000:80f::200e
google.com  nameserver = ns2.google.com.   // 3. authoritative name server
google.com  rdata_257 = \# 15 00056973737565706B692E676F6F67  // extra stuff
google.com  mail exchanger = 20 alt1.aspmx.l.google.com. // 20, 30, ... are lookup order

google.com
    origin = ns1.google.com       // got the answer from
google.com  text = "v=spf1 include:_spf.google.com ~all"  // meta info
</code></pre>
						</aside>
					</section>
					<section>
						<h2><code class="cli">ping</code></h2>
						<p>Verify a host exists</p>
						<aside class="notes">
							<p>
								Use ping to send a message to another computer and, if that
								computer exists and is willing, it will respond.
							</p>
							<p><code>ping -c 5 google.com</code></p>
							<p><code>ping -c 5 example.fubar</code></p>
							<div><b>Output:</b></div>
							<code>PING google.com (216.58.194.110): 56 data bytes</code>
							<ul>
								<li class="explanation">google.com resolves to 216.58.194.110</li>
								<li class="explanation">Your computer sent a 56-byte message</li>
							</ul>
							<code>64 bytes from 216.58.194.110: icmp_seq=0 ttl=54 time=39.147 ms</code>
							<ul>
								<li class="explanation">216.58.194.110 responded with a 64-byte message</li>
								<li class="explanation">imcp_seq is just the sequence</li>
								<li class="explanation">TTL is normally set to 63, so 63 - 54 = 9, 9 hops from google.com to you</li>
								<li class="explanation">The ping took 39.147 ms</li>
							</ul>
						</aside>
					</section>
					<section>
						<h2><code class="cli">traceroute</code></h2>
						<p>Find a route from your computer to another</p>
						<aside class="notes">
							<p>
								Maps a route from your computer to another by sending
								3 datagrams with a TTL (the hop limit) of 0, then 1, then 2, etc.
								until it reaches the final destination. Each time the hop
								limit reaches 0, the router will send back an ICMP message
								that says it failed. <code>traceroute</code> logs that and
								shows it to you.
							</p>
							<p><code>traceroute google.com</code></p>
							<div><b>Kinds of Output:</b></div>
							<ul>
								<li>
									One server responded to all three packets.<br>
									<code>[hop #] [server (ip)] [time 1] [time 2] [time 3]</code>
								</li>
								<li>All packets dropped<br><code>* * *</code></li>
								<li>Three different servers each respond to a packet
									<pre><code>[hop #] [server (ip)] [time]
        [server (ip)] [time]
        [server (ip)] [time]</code></pre></li>
							</ul>
						</aside>
					</section>
					<section>
						<h2><code class="cli">nmap</code></h2>
						<p>Scans for valid IP addresses and ports on those hosts</p>
						<aside class="notes">
							<p><i>This can take a while to complete...</i></p>
							<p>Options used in this example</p>
							<ul>
								<li><b>-A</b>: Enable OS detection, version detection, script scanning, and traceroute</li>
								<li><b>-T4</b>: for faster execution</li>
							</ul>
							<p><code>nmap -A -T4 scanme.nmap.org</code></p>
							<p>Then, let's do The Iron Yard!</p>
							<p><code>nmap -A -T4 www.theironyard.com</code></p>
						</aside>
					</section>
				</section>
				<section>
					<h2>Credits</h2>
					<a href="https://en.wikipedia.org/wiki/File:Cloud_computing.svg">Cloud computing image</a> created by Sam Johnston.
					<br>
					<a href="https://en.wikipedia.org/wiki/Internet_protocol_suite#Key_architectural_principles">IP stack connections</a>
					<br>
					<a href="https://en.wikipedia.org/wiki/Internet_protocol_suite#Key_architectural_principles">UDP encapsulation</a>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				history: true,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
